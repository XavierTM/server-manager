(this["webpackJsonpfresh-react-app"]=this["webpackJsonpfresh-react-app"]||[]).push([[0],{109:function(e,t,n){},124:function(e,t,n){},128:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(34),c=n.n(s),i=(n(109),n(14)),o=n(15),u=n(19),d=n(18),l=n(87),p=n(17),j=n(66),h=n(22),v=n(26),b=n.n(v),O=n(35),_=n(21),f=n(82),x=n.n(f),y=n(1),m=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).___state_update_locks___=new x.a,e.___state_update_in_progress=!1,e.onChangeHandlerGenerator.bind(Object(h.a)(e)),e.setInputValue=e.setInputValue.bind(Object(h.a)(e)),e}return Object(o.a)(n,[{key:"___lock_state_update___",value:function(){var e=this;return new Promise((function(t){e.___state_update_locks___.enqueue(t),e.___state_update_in_progress||(e.___state_update_in_progress=!0,e.___process_next_update___())}))}},{key:"___process_next_update___",value:function(){var e=this.___state_update_locks___.peek();e?e():this.___state_update_in_progress=!1}},{key:"___unlock_state_update___",value:function(){this.___state_update_locks___.dequeue(),this.___process_next_update___()}},{key:"_updateState",value:function(){var e=Object(O.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.___lock_state_update___();case 2:return n=Object(_.a)(Object(_.a)({},this.state||{}),t),e.next=5,this.setState(n);case 5:this.___unlock_state_update___();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setInputValue",value:function(){var e=Object(O.a)(b.a.mark((function e(t,n){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=this.state.values)[t]=n,e.next=4,this._updateState({values:r});case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onChangeHandlerGenerator",value:function(e){return function(e){var t;t="object"==typeof e?e.target.value:e;var n=(this.componentInstance.state||{}).values||{};n[this.name]=t,this.componentInstance._updateState({values:n})}.bind({componentInstance:this,name:e})}},{key:"render",value:function(){return Object(y.jsxs)("p",{children:["Please implement ",Object(y.jsx)("code",{children:"render()"})]})}}]),n}(a.a.Component),g=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;if(Object(i.a)(this,n),r=t.call(this,e),!window.App.history){window.App.history=e.history;var a=function(e){window.App.history.push(e)};window.App.redirect=a,n.redirect=a}return r}return Object(o.a)(n,[{key:"_componentDidMount",value:function(){}},{key:"componentDidMount",value:function(){var e=Object(O.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._componentDidMount();case 2:window.scrollTo(0,0);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_render",value:function(){return Object(y.jsxs)("h1",{children:["Please implement ",Object(y.jsx)("code",{children:"_render()"})]})}},{key:"render",value:function(){return Object(y.jsx)("div",{className:"page",children:this._render()})}}]),n}(m),w=n(180),k=n(184),S=n(181),I=n(182),U=n(183),M=n(173),A=n(186),C=n(176),P=n(187),E=n(188),D=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).updateInterval=1e3,e.state={uptime:0},e.updateUptime=e.updateUptime.bind(Object(h.a)(e)),e}return Object(o.a)(n,[{key:"updateUptime",value:function(){"UP"!==this.props.status&&(this.down_time+=this.updateInterval),this.total_time+=this.updateInterval;var e=100*(1-this.down_time/this.total_time);this._updateState({uptime:e})}},{key:"initializeUptime",value:function(){var e;this.timer&&clearInterval(this.timer),this.total_time=Date.now()-new Date(this.props.reset).getTime(),e="UP"===this.props.status?0:Date.now()-new Date(this.props.last_status_update).getTime(),this.down_time=this.props.down_time+e,this.updateUptime(),this.timer=setInterval(this.updateUptime,this.updateInterval)}},{key:"componentDidUpdate",value:function(e){var t=e.server_name!==this.props.server_name,n=e.reset.toString()!==this.props.reset.toString();(t||n)&&this.initializeUptime()}},{key:"componentDidMount",value:function(){this.initializeUptime()}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){return Object(y.jsxs)("span",{children:[this.state.uptime.toFixed(3),"%"]})}}]),n}(m),T=n(88),z=n(16);function G(e,t){var n=t.name,r=t.changes,a=e.servers.map((function(e){return e.name===n?Object(_.a)(Object(_.a)({},e),r):e}));return Object(_.a)(Object(_.a)({},e),{},{servers:a})}var F=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.payload;switch(n){case"set-servers":return Object(_.a)(Object(_.a)({},e),{},{servers:r});case"add-server":return Object(_.a)(Object(_.a)({},e),{},{servers:[].concat(Object(z.a)(e.servers),[r])});case"update-server":return G(e,r);default:return e}},L=n(83),N=Object(L.a)(F,{servers:[]});var R={addServer:function(e){if(!e||"string"!==typeof e){var t={type:"add-server",payload:e};N.dispatch(t)}},setServers:function(e){if(Array.isArray(e)){var t={type:"set-servers",payload:e};N.dispatch(t)}},updateServer:function(e,t){var n={type:"update-server",payload:{name:e,changes:t}};N.dispatch(n)}},W=n(175),B=window.location.protocol.replace("http","ws"),H=window.location.host,q="".concat(B,"//").concat(H);function V(){ee&&ee.connected||((ee=new window.WebSocket(q)).onopen=Q,ee.onclose=J,ee.onmessage=X)}function J(){ee&&ee.connected||setTimeout(V,3e3)}function K(e,t){var n=JSON.stringify({type:e,payload:t});ee.send(n)}function Q(){ne||K("get-servers")}function X(e){var t=e.data;try{var n=JSON.parse(t),r=n.type,a=n.payload;switch(r){case"servers":R.setServers(a),ne=!0;break;case"changes":var s=a.changes,c=a.name;R.updateServer(c,s);break;case"response":!function(e){var t=e.requestID,n=e.success,r=e.payload,a=Z.get(t)||{resolve:function(){},reject:function(){}},s=a.resolve,c=a.reject,i=a.timer;clearTimeout(i),function(e){Z.delete(e)}(t),n?s(r):c(r)}(a);break;case"add-server":var i=a.server;R.addServer(i);break;default:return}}catch(o){return}}function Y(){V()}var Z=new Map;function $(e,t){return new Promise((function(n,r){var a=Object(W.a)(),s=setTimeout((function(){}),3e4);Z.set(a,{resolve:n,reject:r,timer:s}),K("request",{requestID:a,payload:t,type:e})}))}var ee,te,ne=!1,re=n(179),ae={justifyContent:"center",alignItems:"center",position:"fixed",left:0,top:0,right:0,bottom:0,background:"white",zIndex:2e3},se=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={display:"none"},te=Object(h.a)(e),e}return Object(o.a)(n,[{key:"hide",value:function(){var e=Object(O.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._updateState({display:"none"});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"show",value:function(){var e=Object(O.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._updateState({display:"flex"});case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.display;return Object(y.jsx)("div",{id:"div-loading",style:Object(_.a)(Object(_.a)({},ae),{},{display:e}),children:Object(y.jsx)(re.a,{variant:"indeterminate",id:"div-loading-indicator"})})}}]),n}(m);function ce(){try{te.hide()}catch(e){}}function ie(){try{te.show()}catch(e){alert(e.toString())}}var oe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).resetServer=e.resetServer.bind(Object(h.a)(e)),e}return Object(o.a)(n,[{key:"resetServer",value:function(){var e=Object(O.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ie(),e.prev=1,e.next=4,$("reset-server",{name:this.props.data.name});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),alert("Something went wrong, try again.");case 9:ce();case 10:case"end":return e.stop()}}),e,this,[[1,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.data||{},t=e.status,n=void 0===t?"":t,r=e.name,a=void 0===r?"":r,s=e.disk_usage,c=void 0===s?"":s,i=e.disk_space,o=void 0===i?"":i,u=e.cpu_usage,d=void 0===u?"":u,l=e.reset,p=void 0===l?0:l,j=e.down_time,h=void 0===j?0:j,v=e.last_status_update,b=void 0===v?0:v,O=e.failed_login_attempts,_=void 0===O?0:O;return Object(y.jsxs)(A.a,{open:this.props.open,children:[Object(y.jsx)(C.a,{children:"Server Info"}),Object(y.jsx)(P.a,{children:Object(y.jsx)(w.a,{children:Object(y.jsxs)(S.a,{children:[Object(y.jsxs)(I.a,{children:[Object(y.jsx)(U.a,{children:Object(y.jsx)("b",{children:"Server Name"})}),Object(y.jsx)(U.a,{children:a})]}),Object(y.jsxs)(I.a,{children:[Object(y.jsx)(U.a,{children:Object(y.jsx)("b",{children:"Status"})}),Object(y.jsx)(U.a,{children:Object(y.jsx)("span",{style:{color:"UP"===n?"green":"red"},children:n})})]}),Object(y.jsxs)(I.a,{children:[Object(y.jsx)(U.a,{children:Object(y.jsx)("b",{children:"CPU Usage"})}),Object(y.jsxs)(U.a,{children:[d,"%"]})]}),Object(y.jsxs)(I.a,{children:[Object(y.jsx)(U.a,{children:Object(y.jsx)("b",{children:"Disk Usage"})}),Object(y.jsxs)(U.a,{style:{color:c<70?"green":"red"},children:[parseFloat(c.toString()).toFixed(2),"% of ",parseInt(o),"GB"]})]}),Object(y.jsxs)(I.a,{children:[Object(y.jsx)(U.a,{children:Object(y.jsx)("b",{children:"Uptime"})}),Object(y.jsx)(U.a,{children:Object(y.jsx)(D,{reset:p,last_status_update:b,down_time:h,status:n,server_name:a})})]}),Object(y.jsxs)(I.a,{children:[Object(y.jsx)(U.a,{children:Object(y.jsx)("b",{children:"Failed Login Attempts"})}),Object(y.jsx)(U.a,{style:{color:"red"},children:_})]}),Object(y.jsxs)(I.a,{children:[Object(y.jsx)(U.a,{children:Object(y.jsx)("b",{children:"Last Reset"})}),Object(y.jsx)(U.a,{children:Object(y.jsx)(T.a,{date:p})})]})]})})}),Object(y.jsxs)(E.a,{children:[Object(y.jsx)(M.a,{onClick:this.resetServer,style:{background:"red"},variant:"contained",size:"small",children:"RESET"}),Object(y.jsx)(M.a,{onClick:this.props.close,children:"CLOSE"})]})]})}}]),n}(m),ue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={serverIndex:0,serverModalOpen:!1},e.openServerModal=e.openServerModal.bind(Object(h.a)(e)),e.closeServerModal=e.closeServerModal.bind(Object(h.a)(e)),e}return Object(o.a)(n,[{key:"openServerModal",value:function(e){var t=e.currentTarget.getAttribute("data-server-index");t=parseInt(t),this._updateState({serverIndex:t,serverModalOpen:!0})}},{key:"closeServerModal",value:function(){this._updateState({serverModalOpen:!1})}},{key:"_render",value:function(){var e=this;return Object(y.jsxs)("div",{style:{padding:10},children:[Object(y.jsx)("h1",{style:{color:"grey"},children:"SERVERS"}),Object(y.jsxs)(w.a,{children:[Object(y.jsx)(k.a,{children:Object(y.jsxs)(I.a,{children:[Object(y.jsx)(U.a,{children:Object(y.jsx)("b",{children:"NAME"})}),Object(y.jsx)(U.a,{children:Object(y.jsx)("b",{children:"STATUS"})}),Object(y.jsx)(U.a,{children:Object(y.jsx)("b",{children:"DISK USAGE"})}),Object(y.jsx)(U.a,{})]})}),Object(y.jsx)(S.a,{children:this.props.servers.map((function(t,n){var r=t.name,a=t.disk_usage,s=t.disk_space,c=t.status;return Object(y.jsxs)(I.a,{children:[Object(y.jsx)(U.a,{children:r}),Object(y.jsx)(U.a,{style:{color:"UP"===c?"green":"red"},children:c}),Object(y.jsxs)(U.a,{style:{color:a<70?"green":"red"},children:[parseFloat(a.toString()).toFixed(1),"% of ",parseInt(s),"GB"]}),Object(y.jsx)(U.a,{children:Object(y.jsx)(M.a,{onClick:e.openServerModal,"data-server-index":n,children:"more..."})})]})}))})]}),Object(y.jsx)(oe,{open:this.state.serverModalOpen,data:this.props.servers[this.state.serverIndex],close:this.closeServerModal})]})}}]),n}(g);var de=Object(j.b)((function(e){return{servers:e.servers||[]}}))(ue),le=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={status:"UP"},e}return Object(o.a)(n,[{key:"toggleStatus",value:function(){var e=this.state.status;e="UP"===e?"DOWN":"UP",this._updateState({status:e})}},{key:"_render",value:function(){var e=this.state.status;return Object(y.jsxs)("div",{children:[Object(y.jsx)(D,{status:e,reset:new Date,last_status_update:new Date,down_time:0}),Object(y.jsxs)("div",{children:[Object(y.jsx)("b",{children:"Status"}),": ",e]}),Object(y.jsx)("button",{onClick:this.toggleStatus.bind(this),children:"TOGGLE"})]})}}]),n}(g),pe=n(172),je=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={values:{username:"",password:""}},e.login=e.login.bind(Object(h.a)(e)),e}return Object(o.a)(n,[{key:"login",value:function(){var e=this.state.values,t=e.username,n=e.password;return t?n?"justinmapeta"!==t.toLowerCase()||"MAPETA"!==n?alert("Invalid credentials"):void g.redirect("/dashboard"):alert("Provide a password."):alert("Provide a username.")}},{key:"_render",value:function(){var e=this.state,t=e.username,n=e.password;return Object(y.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"calc(var(--window-height) - var(--navbar-height))"},children:Object(y.jsxs)("div",{style:{width:"220px",border:"1px solid #1976d2",padding:20,borderRadius:5},children:[Object(y.jsx)(pe.a,{onChange:this.onChangeHandlerGenerator("username"),value:t,fullWidth:!0,variant:"outlined",size:"small",label:"Username"}),Object(y.jsx)(he,{}),Object(y.jsx)(pe.a,{onChange:this.onChangeHandlerGenerator("password"),value:n,fullWidth:!0,variant:"outlined",size:"small",label:"Password",type:"password"}),Object(y.jsx)(he,{}),Object(y.jsx)(M.a,{fullWidth:!0,onClick:this.login,variant:"contained",size:"large",children:"LOGIN"})]})})}}]),n}(g),he=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{style:{height:20}})}}]),n}(m),ve=je,be=n(185);function Oe(){var e=document.getElementById("appbar").offsetHeight+"px";document.documentElement.style.setProperty("--navbar-height",e)}var _e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=new ResizeObserver(Oe);e.observe(document.getElementById("appbar")),this.resizeObserver=e,Oe()}},{key:"componentWillUnmount",value:function(){this.resizeObserver.disconnect()}},{key:"render",value:function(){return Object(y.jsx)(be.a,{id:"appbar",children:Object(y.jsx)("h3",{style:{marginLeft:20},children:"SERVER MANAGEMENT"})})}}]),n}(m);n(124);function fe(){var e=window.innerHeight+"px",t=window.innerWidth+"px";document.documentElement.style.setProperty("--window-height",e),document.documentElement.style.setProperty("--window-width",t)}window.App={},window.addEventListener("resize",fe),fe();var xe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){Y()}},{key:"render",value:function(){return Object(y.jsx)(j.a,{store:N,children:Object(y.jsxs)(l.a,{children:[Object(y.jsx)(se,{}),Object(y.jsx)(_e,{}),Object(y.jsx)(p.a,{exact:!0,path:"/",component:ve}),Object(y.jsx)(p.a,{exact:!0,path:"/login",component:ve}),Object(y.jsx)(p.a,{exact:!0,path:"/dashboard",component:de}),Object(y.jsx)(p.a,{exact:!0,path:"/test",component:le})]})})}}]),n}(r.Component),ye=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,190)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(xe,{})}),document.getElementById("root")),ye()}},[[128,1,2]]]);
//# sourceMappingURL=main.5d5b3e19.chunk.js.map